<main>
    <div class="container mt-3">
        <div class="row">
            <!--to show the variations of any give drug-->
            <div class="col-md-3">
                <div class="variation-wrapper pt-2">
                    <h5 class="pl-2">Variations <i class="fa fa-info-circle"></i></h5>
                </div>
            </div>
            <!--Show the images for the drug here-->
            <div class="col-md-4">
                <div class="gallery-wrapper">
                    <img src="{{product?.images[0]}}" style="width: 100%;" class="img-fluid">
                </div>

                <div class="mt-3 d-flex" style="overflow: hidden;">
                    <div class="gallery-wrapper" style="margin-right: 10px" *ngFor="let img of product?.images">
                        <img src="{{img}}" class="img-fluid" style="width: 100%;">
                    </div>
                </div>
            </div>

            <!--Show the details of the drug here-->
            <div class="col-md-5">
                <p class="text-muted small mb-2">{{product?.brand?.variation?.presentation}}</p>
                <p style="padding: 0; margin: 0; font-size: larger;"><strong>{{product?.drug?.name | titlecase}}</strong></p>
                <span class="text-muted mb-2">{{product?.brand?.name | titlecase}} ({{product?.brand?.variation?.strength}})</span>
                <div class="d-flex" style="margin-top: 15px;">
                    <i class="fa fa-star text-warning" *ngFor="let rating of ratings"></i>
                    <span class="ml-3 text-muted small">(20 Ratings)</span>
                </div>

                <div class="mt-3 d-flex">
                    <h4>{{product?.discount_price | currency: "₦"}}</h4>
                    <p class="small text-muted ml-3 mt-4" style="text-decoration:line-through; margin-left: 10px;">{{product?.actual_price | currency:"₦"}}</p>
                </div>

                <p>{{product?.brand?.packaging?.package_per_roll+" "+product?.brand?.variation?.presentation}} per roll</p>

                <div class="d-flex mt-2">
                    <div class="icon" style="margin-right: 10px; margin-top: 10px;">
                        <i class="fa fa-bus"></i>
                    </div>
                    <div class="text">
                        <p> <span>Plus shipping to</span>
                            <br>
                            <span *ngIf="current_address !== null">{{current_address?.address+" "+current_address?.city+" "+current_address.state+", "+current_address.country}}</span>
                        </p>
                    </div>
                </div>

                <div class="d-flex mt-2">
                    <div class="icon" style="margin-right: 10px; margin-top: 10px;">
                        <i class="fa fa-calendar"></i>
                    </div>
                    <div class="text">
                        <p class="small"> <span>Orders within Lagos will be delivered within 48 hours</span>
                            <br>
                            <span><span style="text-decoration: underline;" data-bs-toggle="modal" href="#exampleModalToggle" role="button">click here</span> for shipping dates to your location</span>
                        </p>
                    </div>
                </div>

                <div class="d-flex mt-3">
                    <div class="text" style="margin-right: 20px; margin-top: 7px;">
                        <label>Quantity</label>
                    </div>
                    <div class="form-group small">
                        <input type="number" [(ngModel)]="required_quantity" [disabled]="product.quantity <= 0" max="{{product?.quantity}}" min="1" style="width: 5rem;" class="form-control">
                    </div>
                    <div class="text" style="margin-left: 20px; margin-top: 7px;">
                        <label class="text-muted small" *ngIf="product.quantity > 0">{{product?.quantity}} in stock</label>
                        <label class="text-muted small" *ngIf="product.quantity === 0">Out of Stock</label>
                    </div>
                </div>

                <div class="form-group d-flex mt-4 justify-content-between">
                    <button class="btn btn-primary" (click)="addToCart()" [disabled]="product.quantity === 0 || is_operation_in_progress">{{is_operation_in_progress ? 'Addinng...' : 'Add to cart'}}</button>
                    <span>
                        <i class="fa fa-heart text-danger fa-3x"></i>
                    </span>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3"></div>

            <div class="col-md-9 mt-3">
                <div class="description mt-5">
                    <h4>Description</h4>
                    <hr>
                    <p>{{product?.brand?.variation?.description}}</p>
                </div>
                
                <div class="reviews mt-5">
                    <h4>Reviews</h4>
                    <hr>
                    <div class="mt-2 text-center">
                        <span>No review is available for this product yet</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-body">
            <h4>Delivery Options</h4>
            <h5>Lagos:</h5>
            <p>Express Delivery: (Within 48 hours)</p>
            <p>Self Pickup: (Within 48 hours)</p>

            <h5>Outside Lagos</h5>
            <p>Express Delivery: (Within 72 hours)</p>
            <p>Normal Delivery: (Within 7 days)</p>
        </div>
      </div>
    </div>
  </div>
